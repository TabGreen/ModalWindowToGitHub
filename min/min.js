class MWToGitHub{static getModalWindow(){let a=document.getElementById(mwToGitHub.MW_ID);if(!a){a=document.createElement("div");a.classList.add("hide");a.id=mwToGitHub.MW_ID;let b=document.createElement("img");b.alt="GitHubUserAvatar";b.classList.add(mwToGitHub.IMG_class);b.draggable=!1;mwToGitHub.IMG_EL=b;let c=document.createElement("p");c.innerText=mwToGitHub.text;let d=document.createElement("span");d.classList.add(mwToGitHub.GitHubUserNameElClass);d.addEventListener("click",MWToGitHub.jumpToGitHubPage);mwToGitHub.GitHubUserNameEl=d;let e=document.createElement("p");e.classList.add(mwToGitHub.data_labelClass);let f=document.createElement("span");f.innerText=mwToGitHub.public_repos_label;f.classList.add(mwToGitHub.public_reposElClass);let g=document.createElement("span");g.innerText=mwToGitHub.followers_label;g.classList.add(mwToGitHub.followersElClass);let h=document.createElement("span");h.innerText=mwToGitHub.following_label;h.classList.add(mwToGitHub.followingElClass);e.appendChild(f);e.appendChild(g);e.appendChild(h);let i=document.createElement("p");i.classList.add(mwToGitHub.dataElClass);let j=document.createElement("span");j.classList.add(mwToGitHub.public_reposElClass);j.innerText="";let k=document.createElement("span");k.classList.add(mwToGitHub.followersElClass);k.innerText="";let l=document.createElement("span");l.classList.add(mwToGitHub.followingElClass);l.innerText="";i.appendChild(j);i.appendChild(k);i.appendChild(l);mwToGitHub.public_reposEl=j;mwToGitHub.followersEl=k;mwToGitHub.followingEl=l;let m=document.createElement("div");m.classList.add(mwToGitHub.data_tableElClass);m.appendChild(e);m.appendChild(i);let n=document.createElement("p");n.classList.add(mwToGitHub.bioElClass);n.innerText="";mwToGitHub.bioEl=n;let o=document.createElement("p");o.classList.add(mwToGitHub.msgEl_class);o.innerText="正在从GitHub加载数据";mwToGitHub.msgEl=o;let p=document.createElement("button");p.setAttribute("type","button");p.classList.add(mwToGitHub.close_buttonElClass);p.addEventListener("click",MWToGitHub.handleCloseButtonClick);p.innerText="❌";mwToGitHub.close_buttonEl=p;a.appendChild(b);c.appendChild(d);a.appendChild(c);a.appendChild(m);a.appendChild(n);a.appendChild(o);a.appendChild(p)}a.classList.add("msg");return a}static getStartButton(){let a=document.getElementById(mwToGitHub.MW_button_ID);if(!a){a=document.createElement("button");a.setAttribute("type","button");a.id=mwToGitHub.MW_button_ID;a.addEventListener("click",MWToGitHub.handleButtonClick);let b=document.createElement("img");b.alt="GitHubICON";b.src=mwToGitHub.GitHubICON_URL;b.draggable=!1;a.appendChild(b)}return a}static handleButtonClick(){mwToGitHub.startButtonEl.disabled=!0;mwToGitHub.close_buttonEl.disabled=!1;mwToGitHub.EL.classList.remove("hide");mwToGitHub.startButtonEl.classList.add("hide")}static handleCloseButtonClick(){mwToGitHub.close_buttonEl.disabled=!0;mwToGitHub.startButtonEl.disabled=!1;mwToGitHub.EL.classList.add("hide");mwToGitHub.startButtonEl.classList.remove("hide")}static getGitHubUserName(){let a=void 0;let b=document.querySelector('meta[name="author"]');if(b){let c=b.getAttribute("content");let d=c.split("@");if(d[0].toLowerCase()==="github"&&d[1]){a=d[1]}}let e=document.getElementsByTagName("meta");for(let f=0;f<e.length&&!a;f++){let g=e[f];let h=g.name.toLowerCase();if(h.includes("author")&&h.includes("github")){a=g.getAttribute("content")}}const i=!1;for(let f=0;f<e.length&&!a&&i;f++){let g=e[f];let h=g.name.toLowerCase();if(h.includes("github")){a=g.getAttribute("content")}}return a}static async getGitHubUserData(){const a="https://api.github.com/users/";if(!mwToGitHub.GitHubUserName){console.log("请求数据:无用户名");mwToGitHub.msgEl.innerText="无用户名";return}let b=a+mwToGitHub.GitHubUserName;let c=await fetch(b);if(!c.ok){console.log("请求数据:网络错误");mwToGitHub.msgEl.innerText="网络错误";return}let d=await c.json();mwToGitHub_ajaxData.GitHubUser_public_name=d.name;mwToGitHub_ajaxData.IMG_URL=d.avatar_url;mwToGitHub_ajaxData.public_repos=d.public_repos;mwToGitHub_ajaxData.followers=d.followers;mwToGitHub_ajaxData.following=d.following;mwToGitHub_ajaxData.bio=d.bio;if(document.readyState=="complete"){this.addDataToElement()}else{document.addEventListener("DOMContentLoaded",this.addDataToElement)}}static addDataToElement(){mwToGitHub.GitHubUserNameEl.innerText=mwToGitHub_ajaxData.GitHubUser_public_name;mwToGitHub.IMG_EL.src=mwToGitHub_ajaxData.IMG_URL;mwToGitHub.public_reposEl.innerHTML=mwToGitHub_ajaxData.public_repos;mwToGitHub.followersEl.innerHTML=mwToGitHub_ajaxData.followers;mwToGitHub.followingEl.innerHTML=mwToGitHub_ajaxData.following;mwToGitHub.bioEl.innerHTML=mwToGitHub_ajaxData.bio;mwToGitHub.isLoaded=!0;mwToGitHub.msgEl.innerText="加载完成";mwToGitHub.EL.classList.remove("msg")}static addElsToDOM(){document.body.appendChild(mwToGitHub.EL);document.body.appendChild(mwToGitHub.startButtonEl)}static jumpToGitHubPage(){let a=mwToGitHub.GitHub_Doman+mwToGitHub.GitHubUserName;window.open(a)}}const mwToGitHub={GitHub_Doman:"https://github.com/",GitHubICON_URL:"https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",MW_button_ID:"ModalWindowToGitHubButton",MW_ID:"ModalWindowToGitHub",IMG_class:"github-user-img",GitHubUserNameElClass:"github-user-name",text:"",data_labelClass:"data-label",public_repos_label:"存储库",followers_label:"跟随者",following_label:"关注者",dataElClass:"data",data_tableElClass:"data-tabel",public_reposElClass:"public_repos",followersElClass:"followers",followingElClass:"following",bioElClass:"bio",msgEl_class:"msgbox",close_buttonElClass:"close-button",GitHubUserName:void 0,startButtonEl:null,EL:null,IMG_EL:null,GitHubUserNameEl:null,public_reposEl:null,followersEl:null,followingEl:null,bioEl:null,msgEl:null,close_buttonEl:null};const mwToGitHub_ajaxData={isLoaded:!1,GitHubUser_public_name:null,IMG_URL:null,public_repos:null,followers:null,following:null,bio:null};mwToGitHub.EL=MWToGitHub.getModalWindow();mwToGitHub.startButtonEl=MWToGitHub.getStartButton();mwToGitHub.GitHubUserName=MWToGitHub.getGitHubUserName();if(document.readyState==="loading"){window.addEventListener("DOMContentLoaded",MWToGitHub.addElsToDOM)}else{MWToGitHub.addElsToDOM()}MWToGitHub.getGitHubUserData();